<div class="container">
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-1">Atlas</h1>
            <h2 class="display-2">Simple. Sensible. SQL.</h2>
            <p class="lead">
                Atlas is a database framework for PHP to help you work with your
                <strong>persistence</strong> model, while providing a path to
                refactor towards a richer <strong>domain</strong> model as needed.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Object-Relational Manager</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A data mapper ORM for your persistence layer, not your
                        domain layer. The flagship package in the Atlas family.
                        Supports MySQL, PostgreSQL, SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/orm/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Orm/">Code</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Skeleton Generator</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A command-line interface to generate all of the necessary
                        Atlas classes to model your existing database tables in PHP.
                        Supports MySQL, PostgreSQL, SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/skeleton/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Cli/">Code</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Data Mapper</h1>
                </div>
                <div class="panel-body">
                    <p>
                        The core of the Atlas.Orm package, the data mapper helps
                        you define relationships between table data gateways so
                        you can retrieve Record objects with all their related rows.
                        Supports MySQL, PostgreSQL, SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/orm/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Mapper/">Code</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Table Data Gateway</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A table data gateway implementation, for when a full-fledged
                        persistence ORM seems too much. Supports MySQL, PostgreSQL,
                        SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/table/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Table/">Code</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Query System</h1>
                </div>
                <div class="panel-body">
                    <p>
                        Build and perform SELECT, INSERT, UPDATE, and DELETE queries
                        through a fluent interface using standard SQL vocabulary.
                        Supports all database drivers for PDO.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/query/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Query/">Code</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">PDO Wrapper</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A straightforward PDO connection wrapper to provide
                        convenience methods for fetching and yielding database
                        results. Supports all database drivers for PDO.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/pdo/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Pdo/">Code</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-1"></div>

        <div class="col-md-10">
            <h3>Why Atlas?</h3>

            <p>
                Atlas helps developers to get started about as easily as they would with Active
                Record for their <strong>persistence</strong> model, and provides a path to refactor more
                easily towards a richer <strong>domain</strong> model as needed.
            </p>

            <h3>What Is A Persistence Model?</h3>

            <p>
                A persistence model is a model of your database, not your
                business domain. More specifically, it is an object-oriented
                representation of the tables and rows in the database.
            </p>

            <p>
                Very often, a developer does not have a good, clean domain model
                to work with, especially early in the project. But there is
                almost always a database of some sort. Atlas models that
                database structure so you can use it more easily in PHP code.
            </p>

            <h3>Why Use A Persistence Model?</h3>

            <p>
                A persistence model alone should get your appplication a long
                way, especially at the beginning of a project. The Row, Record,
                and RecordSet objects in Atlas are disconnected from the database, which
                should make the refactoring and integration process a lot
                cleaner than with Active Record.
            </p>

            <p>
                Because Atlas works with your database schema as-it-is,
                and not as-the-ORM-thinks it-should-be, Atlas is a very good
                fit for projects with pre-existing databases. (Indeed, Atlas
                supports both <strong>composite primary keys</strong> and
                <strong>composite foreign keys</strong> -- for some legacy
                systems, composite keys are absolutely necessary.)
            </p>

            <h3>How Does Atlas Work?</h3>

            <p>
                At a high level, Atlas is mini-framework built from a stack of
                packages, where any "lower" package can be used indepdendently
                of the the ones "above" it. This means you can pick the exact
                level of functionality you need right now, and expand to the
                next greater set of functionality only as is becomes necessary.
            </p>

            <p>
                The package hierarchy, from bottom to top, looks like this:
            </p>

            <ul>
                <li>
                    <p><a href="https://github.com/atlasphp/Atlas.Pdo">Atlas.Pdo</a> provides a database Connection object and a ConnectionLocator. If all you need is convenience wrapper around PDO with fetch and yield methods, this is the package for you.</p>
                </li>
                <li>
                    <p><a href="https://github.com/atlasphp/Atlas.Query">Atlas.Query</a> is a query builder that wraps an Atlas.Pdo Connection. If you just want to build and perform SQL queries using an object-oriented approach, the Atlas query objects can handle that.</p>
                </li>
                <li>
                   <p><a href="https://github.com/atlasphp/Atlas.Table">Atlas.Table</a> is a table data gateway implementation that uses Atlas.Query under the hood. If you don't need a full data mapper system and only want to interact with individual tables and their row objects, this will do the trick.</p>
                </li>
                <li>
                    <p><a href="https://github.com/atlasphp/Atlas.Mapper">Atlas.Mapper</a> is a data mapper implementation that models the relationships between tables. It allows you to build Record and RecordSet objects whose Row objects map naturally back to Table objects; you can write them back to the database one by one, or persist an entire Record graph back to the database in one go.</p>
                </li>
                <li>
                    <p><a href="https://github.com/atlasphp/Atlas.Orm">Atlas.Orm</a> is the overarching ORM package; it provides a convenience wrapper around the Mapper system, as well as several strategies for transaction management.</p>
                </li>
            </ul>

            <p>
                Thus, Atlas uses a table data gateway for the underlying table Rows, then composes
                those Rows into Records and RecordSets via a data mapper; the PDO connection and query
                system move the data back and forth between PHP and the database.

            <h3>From Persistence To Domain</h3>

            <p>
                At the beginning, your domain logic layer (e.g. service layer,
                application service, interactor, use case, etc.) can manipulate
                the Atlas persistence objects (Records and RecordSets) directly.
                You can add simple behavior methods to your Records and
                RecordSets as well.
            </p>

            <p>
                Then, as a domain model grows within your application,
                <a href="http://www.mehdi-khalili.com/orm-anti-patterns-part-4-persistence-domain-model">Mehdi Khalili</a>
                shows that the refactoring process can move along one of two paths:
            </p>

            <ul>
                <li>
                    "Domain Model composed of Persistence Model". That is, the domain objects
                    can use Atlas persistence model Record objects internally, but do not expose
                    them. The domain objects can manipulate the persistence model objects
                    internally as much as they wish. For example, a domain object might have a
                    <tt>getAddress()</tt> method that reads from the internal Record.
                </li>

                <li>
                    "DDD on top of ORM". Here, Repositories map the persistence model objects to
                    and from domain objects. This provides a full decoupling of the domain model
                    from the persistence model, but is more time-consuming to develop.
                </li>
            </ul>

            <h3>Other Considerations</h3>

            <p>Here some further considerations regarding Atlas:</p>

            <ul>
                <li>
                    <strong>PHPStorm IDE auto-completion.</strong> When you use
                    the <tt>phpstorm.meta.php</tt> resource included in relevant
                    packages, PHPStorm will autocomplete methods and properties
                    from your Mapper, Record, RecordSet, et al. classes.
                </li>

                <li>
                    <strong>No annotations.</strong> Code should be in code, not
                    in comments.
                </li>

                <li>
                    <strong>No lazy-loading.</strong> Lazy-loading is seductive,
                    but eventually is more trouble than it's worth. Atlas
                    doesn't make it available at all, so it cannot be invoked
                    accidentally.
                </li>

                <li>
                    <strong>No data-type abstractions.</strong> Data-type abstraction seems great at first, but
                    it too ends up not being worth the trouble. Therefore, the actual underlying
                    database types are exposed and available as much as possible.
                </li>
            </ul>

            <h3>Contra-Indications</h3>

            <p>You may not find Atlas suitable for your needs because of the following:</p>

            <ul>
                <li>
                    Atlas uses code generation, though only in a very limited way. It turns out
                    that code generation is useful for some boilerplate code. For example, each table
                    is described as a PHP class, one that returns things like table name, column
                    names, etc. Since the table class should change only when the database
                    changes, code generation makes sense here; however, some developers may
                    be against code generation just on principle alone.
                </li>

                <li>
                    Atlas uses base Row, Record, and RecordSet classes, instead of plain-old PHP
                    objects. If this were a domain modeling system, a base class would be
                    unacceptable. Because Atlas is a <strong>persistence</strong> modeling system, base classes
                    are less objectionable, but for some this may be undesired.
                </li>
            </ul>

        </div>
        <div class="col-md-1"></div>
    </div>
</div>

<footer>
    <div id="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>&copy; 2015-2018, Atlas for PHP</p>
                </div>
            </div>
        </div>
    </div>
</footer>
