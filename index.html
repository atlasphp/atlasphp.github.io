<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="HandheldFriendly" content="True"/>
<title>Atlas Database Framework for PHP</title>
    
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/cerulean/bootstrap.min.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://tobiju.github.io/share/prismjs/prism-base16-ateliersulphurpool.light.css" />
<link rel="stylesheet" href="https://tobiju.github.io/share/prismjs/prism-linenumbers.css" />
<link rel="stylesheet" href="/style.css" />
</head>
<body data-spy="scroll" data-target="#sideNav" data-offset="50" class="bbt-theme-cerulean">
<div class="page-wrapper">
    <header>
    
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="box-header container">
        <form class="form-search navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text"
                       placeholder="Search"
                       class="js-search-input form-control"
                       data-roothref="/">

                <div class="js-search-results"></div>
            </div>
        </form>

        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#js-navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
                            <a class="navbar-brand" href="/">
                    <img alt="logo" src="https://raw.githubusercontent.com/atlasphp/atlasphp.github.io/master/images/atlas.png" title="Home">
                </a>
                    </div>

        <div class="collapse navbar-collapse" id="js-navbar-collapse">
            
    
    <ul class="nav navbar-nav">
                        <li>
    <a href="/cassini/">Cassini (v3)</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/orm/">ORM</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/orm/getting-started.html">Getting Started</a>

    </li>
                        <li>
    <a href="/cassini/orm/relationships.html">Mapper Relationships</a>

    </li>
                        <li>
    <a href="/cassini/orm/reading.html">Fetching Records and RecordSets</a>

    </li>
                        <li>
    <a href="/cassini/orm/records.html">Working with Records</a>

    </li>
                        <li>
    <a href="/cassini/orm/record-sets.html">Working with RecordSets</a>

    </li>
                        <li>
    <a href="/cassini/orm/transactions.html">Transactions</a>

    </li>
                        <li>
    <a href="/cassini/orm/behavior.html">Record and RecordSet Behaviors</a>

    </li>
                        <li>
    <a href="/cassini/orm/events.html">Events</a>

    </li>
                        <li>
    <a href="/cassini/orm/direct.html">Direct Queries</a>

    </li>
                        <li>
    <a href="/cassini/orm/other.html">Other Topics</a>

    </li>
                        <li>
    <a href="/cassini/orm/domain.html">Domain Models</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/cassini/skeleton/">Skeleton Generator</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/skeleton/usage.html">Usage</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/cassini/table/">Table Data Gateway</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/table/getting-started.html">Getting Started</a>

    </li>
                        <li>
    <a href="/cassini/table/reading.html">Reading From The Table</a>

    </li>
                        <li>
    <a href="/cassini/table/writing.html">Writing To The Table</a>

    </li>
                        <li>
    <a href="/cassini/table/events.html">Table Events</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/cassini/query/">Query System</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/query/getting-started.html">Getting Started</a>

    </li>
                        <li>
    <a href="/cassini/query/binding.html">Value Binding</a>

    </li>
                        <li>
    <a href="/cassini/query/select.html">SELECT</a>

    </li>
                        <li>
    <a href="/cassini/query/insert.html">INSERT</a>

    </li>
                        <li>
    <a href="/cassini/query/update.html">UPDATE</a>

    </li>
                        <li>
    <a href="/cassini/query/delete.html">DELETE</a>

    </li>
                        <li>
    <a href="/cassini/query/other.html">Other Topics</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/cassini/info/">Schema Information</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/info/usage.html">Usage</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/cassini/pdo/">PDO Connection</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/cassini/pdo/connection.html">PDO Connection</a>

    </li>
                        <li>
    <a href="/cassini/pdo/connection-locator.html">Connection Locator</a>

    </li>
            </ul>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/boggs/">Boggs (v2)</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/boggs/mapper/">ORM</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/boggs/mapper/getting-started.html">Getting Started</a>

    </li>
                        <li>
    <a href="/boggs/mapper/relationships.html">Mapper Relationships</a>

    </li>
                        <li>
    <a href="/boggs/mapper/reading.html">Fetching Records and RecordSets</a>

    </li>
                        <li>
    <a href="/boggs/mapper/records.html">Working with Records</a>

    </li>
                        <li>
    <a href="/boggs/mapper/record-sets.html">Working with RecordSets</a>

    </li>
                        <li>
    <a href="/boggs/mapper/transactions.html">Transactions (Unit of Work)</a>

    </li>
                        <li>
    <a href="/boggs/mapper/behavior.html">Record and RecordSet Behaviors</a>

    </li>
                        <li>
    <a href="/boggs/mapper/events.html">Events</a>

    </li>
                        <li>
    <a href="/boggs/mapper/direct.html">Direct Queries</a>

    </li>
                        <li>
    <a href="/boggs/mapper/domain.html">Domain Models</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/boggs/skeleton/">Skeleton Generator</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/boggs/skeleton/getting-started.html">Atlas.Cli 1.x</a>

    </li>
            </ul>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/albers/">Albers (v1)</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/albers/mapper/">ORM</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/albers/mapper/getting-started.html">Getting Started</a>

    </li>
                        <li>
    <a href="/albers/mapper/relationships.html">Mapper Relationships</a>

    </li>
                        <li>
    <a href="/albers/mapper/reading.html">Fetching Records and RecordSets</a>

    </li>
                        <li>
    <a href="/albers/mapper/records.html">Working with Records</a>

    </li>
                        <li>
    <a href="/albers/mapper/record-sets.html">Working with RecordSets</a>

    </li>
                        <li>
    <a href="/albers/mapper/transactions.html">Transactions (Unit of Work)</a>

    </li>
                        <li>
    <a href="/albers/mapper/behavior.html">Record and RecordSet Behaviors</a>

    </li>
                        <li>
    <a href="/albers/mapper/events.html">Events</a>

    </li>
                        <li>
    <a href="/albers/mapper/direct.html">Direct Queries</a>

    </li>
                        <li>
    <a href="/albers/mapper/domain.html">Domain Models</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/albers/skeleton/">Skeleton Generator</a>
    
    <ul class="dropdown-menu">
                        <li>
    <a href="/albers/skeleton/getting-started.html">Atlas.Cli 1.x</a>

    </li>
            </ul>

    </li>
            </ul>

    </li>
            </ul>

        </div>
    </div>
</nav>
</header>
<div class="container">
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-1">Atlas</h1>
            <h2 class="display-2">Simple. Sensible. SQL.</h2>
            <p class="lead">
                Atlas is a database framework for PHP composed of several
                packages "stacked" onto each other. You can pick exactly the
                functionality you need right now, and add new functionality only
                as you need it.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Object-Relational Manager</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A data mapper ORM for your persistence layer, not your
                        domain layer. The flagship package in the Atlas family.
                        Supports MySQL, PostgreSQL, SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/orm/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Orm/tree/3.x">Code</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Table Data Gateway</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A table data gateway implementation, for when a full-fledged
                        persistence ORM seems too much. Supports MySQL, PostgreSQL,
                        SQLite, and SQL Server.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/table/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Table/">Code</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">Query System</h1>
                </div>
                <div class="panel-body">
                    <p>
                        Build and perform SELECT, INSERT, UPDATE, and DELETE queries
                        through a fluent interface using standard SQL vocabulary.
                        Supports all database drivers for PDO.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/query/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Query/">Code</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1 class="panel-title">PDO Wrapper</h1>
                </div>
                <div class="panel-body">
                    <p>
                        A straightforward PDO connection wrapper to provide
                        convenience methods for fetching and yielding database
                        results. Supports all database drivers for PDO.
                    </p>
                    <p>
                        <i class="fas fa-book"></i> <a href="/cassini/pdo/">Docs</a>
                        <i class="fab fa-github"></i> <a href="https://github.com/atlasphp/Atlas.Pdo/">Code</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <p>
            Atlas helps developers to get started about as easily as they would with Active
            Record for their *persistence* model, and provides a path to refactor more
            easily towards a richer *domain* model as needed.
        </p>

        <p>
            Atlas uses a table data gateway for the underlying table Rows, then composes
            those Rows into Records and RecordSets via a data mapper. Simple methods can be
            added, as they become necessary, to the Record and RecordSet persistence model
            objects. (Rows do not have behavior.) The domain logic layer (e.g. a service
            layer, application service, or use case) can then manipulate the Record objects.
        </p>

        <p>
            A persistence model alone should get the application a long way, especially at
            the beginning of a project. The Row, Record, and RecordSet objects are
            disconnected from the database, which should make the refactoring and
            integration process a lot cleaner than with Active Record.
        </p>

        <p>As a domain model grows within the application,
            <a href="http://www.mehdi-khalili.com/orm-anti-patterns-part-4-persistence-domain-model">Mehdi Khalili</a>
            shows that the refactoring process can then move along one of two paths:</p>

        <ul>
            <li>
                "Domain Model composed of Persistence Model". That is, the domain objects
                use Atlas persistence model Record objects internally, but do not expose
                them. The domain objects can manipulate the persistence model objects
                internally as much as they wish. For example, a domain object might have a
                <code>getAddress()</code> method that reads from the internal Record.
            </li>

            <li>
                "DDD on top of ORM". Here, Repositories map the persistence model objects to
                and from domain objects. This provides a full decoupling of the domain model
                from the persistence model, but is more time-consuming to develop.
            </li>
        </ul>

        <p>
            Finally, Atlas supports <strong>composite primary keys</strong> and
            <strong>composite foreign keys</strong>. Performance in these cases
            is sure to be slower, but it is in fact supported. (For some legacy
            systems, composite keys are absolutely necessary.)
        </p>

        <p>Other rationalizations, essentially based around things <em>not</em> desired:</p>

        <ul>

            <li>
                No annotations. (Code should be in code, not in comments.)
            </li>

            <li>
                No lazy-loading. Lazy-loading is seductive, but eventually is more trouble
                than it's worth. Atlas doesn't make it available at all, so it cannot be
                invoked accidentally.
            </li>

            <li>
                No data-type abstractions. Data-type abstraction seems great at first, but
                it too ends up not being worth the trouble. Therefore, the actual underlying
                database types are exposed and available as much as possible.
            </li>
        </ul>

        <p>Possible deal-breakers for potential users:</p>

        <ul>
            <li>
                Atlas uses code generation, though only in a very limited way. It turns out
                that code generation is useful for building the SQL table classes. Each table
                is described as a PHP class, one that returns things like table name, column
                names, etc. This is the only substantial class that gets generated by Atlas;
                the others are empty extensions of parent classes.
            </li>

            <li>
                Atlas uses base Row, Record, and RecordSet classes, instead of plain-old PHP
                objects. If this were a domain modeling system, a base class would be
                unacceptable. Because Atlas is a *persistence* modeling system, base classes
                are less objectionable, but for some this may be undesired.
            </li>
        </ul>

      </div>
</div>

<footer>
    <div id="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>&copy; 2015-2018, Atlas for PHP</p>
                </div>
            </div>
        </div>
    </div>
</footer>

</div>
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/0.6.0/lunr.min.js"></script>
<script src="http://bartaz.github.io/sandbox.js/jquery.highlight.js"></script>
<script src="https://tobiju.github.io/share/prismjs/main.js"></script>
<script src="https://tobiju.github.io/share/prismjs/prism.js"></script>
<script type="text/javascript">

    function Search() {
        this.store = {};
        this.index = lunr(function () {
            this.ref('id');
            this.field('title', {boost: 10});
            this.field('content');
        });
        this.searchResults = $('.js-search-results').addClass('list-search-results');
    }

    Search.prototype = {
        constructor: Search,
        init: function () {
            this.createIndex();
            this.bindEvents();
        },
        createIndex: function () {
            var $this = this,
                indexFilePath = $('.js-search-input').data('roothref') + 'index.json';

            $.getJSON(indexFilePath, function (data) {
                $.each(data, function (key, item) {
                    $this.index.add({
                        id: item.id,
                        title: item.title,
                        content: item.content
                    });

                    $this.store[item.id] = {
                        href: item.id,
                        title: item.title,
                        content: item.content
                    }
                });
            });
        },
        bindEvents: function () {
            var $this = this;

            $('html')
                .on('click', function (event) {
                    $this.close($(this), event);
                });

            $('.js-search-input, .js-search-results')
                .on('click', function (event) {
                    $this.click($(this), event);
                });

            $('.js-search-input')
                .on('focus', function (event) {
                    $this.focus($(this), event);
                })
                .on('keyup', function (event) {
                    $this.search($(this), event)
                })
                .on('keydown', function (event) {
                    if ($('.js-search-results ul').is(':visible')){
                        $this.navigation($(this), event)
                    }
                })
        },
        click: function (element, event) {
            event.stopPropagation();
        },
        focus: function (element, event) {
            this.searchInputWidth = element.css('width');
            element.animate({
                'width': 600
            }, 500);
            $('#js-navbar-collapse > ul').fadeOut();
        },
        close: function (element, event) {
            var $this = this;

            $('.js-search-results').hide();
            $('.js-search-input').animate({
                'width': $this.searchInputWidth
            }, 500);
            $('#js-navbar-collapse > ul').fadeIn();
        },
        search: function (element, event) {
            var $this = this;

            if (event.keyCode == 13 || event.keyCode == 38 || event.keyCode == 40) {
                return;
            }

            var query = element.val(),
                results = $this.index.search(query);

            if (!results.length) {
                $this.searchResults.empty();
                return;
            }

            var resultsList = results.reduce(function (ul, result) {
                var item = $this.store[result.ref];
                var title = $('<b>').text(item.title);

                var cropText = $this.cropText(item.content, query);
                if (cropText.length === 0) {
                    cropText = $('<p>').html(item.content.substring(0, 120) + "...");
                }
                var content = content = $('<p>').html(cropText);

                var div = $('<div>')
                    .append(title)
                    .append(content);
                var a = $('<a>').attr('href', item.href)
                    .append(div);
                var li = $('<li>')
                    .append(a);
                ul.append(li);

                return ul;
            }, $('<ul>'));

            this.searchResults.html(resultsList);

            $('.js-search-results').show();
            $(".js-search-results li:first-child").addClass('selected');
        },
        cropText: function (content, query) {
            var cropedText = '',
                re = new RegExp("\\s?(.{0,30})?" + query + ".*?\\b(.{0,30}.)?\\s?", "gi");

            $.each(content.match(re), function (key, value) {
                cropedText += '...' + value + '...';
            });

            return cropedText;
        },
        navigation: function (element, event) {
            var selected = null,
                listSelector = ".js-search-results ul",
                listItemSelector = listSelector + " li",
                selectedListItemSelector = listItemSelector + ".selected",
                selectedListItemSelectorAnchor = listItemSelector + ".selected a";

            // enter
            if (event.keyCode == 13) {
                event.preventDefault();
                this.close();
                window.location.replace($(selectedListItemSelectorAnchor).attr('href'));
            }

            // up
            if (event.keyCode == 38) {
                selected = $(selectedListItemSelector);
                $(listItemSelector).removeClass("selected");

                if (selected.prev().length == 0) {
                    selected.siblings().last().addClass("selected");
                } else {
                    selected.prev().addClass("selected");
                }

                selected = $(selectedListItemSelector);
                this.scrollListUp(selected);
            }

            // down
            if (event.keyCode == 40) {
                selected = $(selectedListItemSelector);
                $(listItemSelector).removeClass("selected");

                if (selected.next().length == 0) {
                    selected.siblings().first().addClass("selected");
                } else {
                    selected.next().addClass("selected");
                }

                selected = $(selectedListItemSelector);
                this.scrollListDown(selected);
            }
        },
        scrollListDown: function (element) {
            var ul = element.parent(),
                ulHeight = ul.height(),
                ulBottomPosition = ulHeight + ul.scrollTop(),
                liBottomPosition = element.position().top + element.height();

            if (liBottomPosition > ulBottomPosition) {
                ul.scrollTop(liBottomPosition - ulHeight);
            }

            if (element.is(':first-child')) {
                ul.scrollTop(0);
            }
        },
        scrollListUp: function (element) {
            var ul = element.parent(),
                ulTopPosition = ul.scrollTop(),
                liTopPosition = element.position().top;

            if (liTopPosition < ulTopPosition) {
                ul.scrollTop(element.position().top);
            }

            if (element.is(':last-child')) {
                ul.scrollTop(element.position().top - element.height());
            }
        }
    };

    $(function () {
        var search = new Search();
        search.init();
    });
</script>
</body>
</html>
